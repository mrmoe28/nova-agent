# Database
# For local development with SQLite:
# DATABASE_URL="file:./dev.db"

# For production with PostgreSQL (Neon/Vercel):
DATABASE_URL="postgresql://user:password@host/database"

# Vercel will auto-populate this when using Vercel Postgres or Neon integration

# Cron Job Secret
# Used to authenticate Vercel cron jobs
# Generate a secure random string for production
CRON_SECRET="your_secure_random_secret_here"

# Logging Configuration
# Options: debug, info, warn, error
# Use 'info' for production, 'debug' for development
LOG_LEVEL="info"

# Browser Scraper Configuration
# Browserless API token for Browser Mode scraping via BrowserQL
# Get your free token from https://account.browserless.io/
# Free tier: 1,000 units/month, no credit card required
#
# Required for Browser Mode scraping (optional feature)
# Leave empty if not using Browser Mode scraping
BROWSERLESS_TOKEN=""

# AI Agent Scraper Configuration
# Anthropic API key for AI-powered intelligent scraping
# Get your API key from https://console.anthropic.com/
#
# Required for AI Agent Mode scraping (optional feature)
# The AI Agent uses Claude to analyze pages, make strategic decisions,
# and self-correct when scraping fails
#
# Leave empty if not using AI Agent Mode (useAI: true)
ANTHROPIC_API_KEY=""

# ==============================================================================
# SYSTEM SIZING CONFIGURATION
# ==============================================================================
# Configure solar and battery system calculation defaults
# These values affect system design recommendations and cost estimates

# Solar array oversizing factor (default: 1.2 = 120% of calculated needs)
SOLAR_SIZING_FACTOR="1.2"

# Average peak sun hours per day (varies by geography, default: 4)
# Examples: Arizona=5.5, Seattle=3.5, Florida=5.0
PEAK_SUN_HOURS="4"

# Standard solar panel wattage in watts (default: 400W)
# Adjust for newer high-efficiency panels (450W-550W)
SOLAR_PANEL_WATTAGE="400"

# Battery capacity overhead multiplier (default: 1.2 = 20% overhead)
BATTERY_OVERHEAD="1.2"

# Inverter oversizing multiplier (default: 1.25 = 25% oversizing)
INVERTER_MULTIPLIER="1.25"

# Solar installation cost per watt in USD (default: $2.50/W)
SOLAR_COST_PER_WATT="2.5"

# Battery cost per kWh in USD (default: $800/kWh)
BATTERY_COST_PER_KWH="800"

# Inverter cost per kW in USD (default: $1200/kW)
INVERTER_COST_PER_KW="1200"

# Base installation labor cost in USD (default: $5000)
INSTALLATION_BASE_COST="5000"

# ==============================================================================
# WEB SCRAPING CONFIGURATION
# ==============================================================================
# Configure HTTP scraper behavior, timeouts, and rate limiting

# Default rate limit between requests in milliseconds (default: 1000ms = 1 second)
SCRAPER_RATE_LIMIT="1000"

# Default HTTP request timeout in milliseconds (default: 30000ms = 30 seconds)
SCRAPER_TIMEOUT="30000"

# Maximum retry attempts for failed requests (default: 3)
SCRAPER_MAX_RETRIES="3"

# Base delay for exponential backoff in milliseconds (default: 1000ms)
SCRAPER_BASE_DELAY="1000"

# Maximum delay for exponential backoff in milliseconds (default: 10000ms)
SCRAPER_MAX_DELAY="10000"

# Exponential backoff multiplier (default: 2 = doubles each retry)
SCRAPER_BACKOFF_FACTOR="2"

# User-Agent identifier for HTTP requests
SCRAPER_USER_AGENT="NovaAgent/1.0 (+https://novaagent-kappa.vercel.app)"

# ==============================================================================
# BROWSER SCRAPING CONFIGURATION
# ==============================================================================
# Configure headless browser behavior for JavaScript-heavy websites

# Browser viewport dimensions
BROWSER_WIDTH="1920"
BROWSER_HEIGHT="1080"

# Page navigation timeout in milliseconds (default: 30000ms)
BROWSER_NAV_TIMEOUT="30000"

# Initial wait before scrolling in milliseconds (default: 2000ms)
BROWSER_INITIAL_WAIT="2000"

# Wait after scrolling for lazy load in milliseconds (default: 1000ms)
BROWSER_POST_SCROLL_WAIT="1000"

# Maximum scroll attempts for pagination (default: 10)
BROWSER_MAX_SCROLLS="10"

# Scroll interval delay in milliseconds (default: 1500ms)
BROWSER_SCROLL_INTERVAL="1500"

# BrowserQL (Browserless) endpoint URL
# Default: https://production-sfo.browserless.io/chromium/bql
# Change for self-hosted Browserless instance
BROWSERLESS_ENDPOINT="https://production-sfo.browserless.io/chromium/bql"

# BrowserQL wait timeout in milliseconds (default: 2000ms)
BQL_WAIT_TIMEOUT="2000"

# ==============================================================================
# AI CONFIGURATION
# ==============================================================================
# Configure Claude AI behavior for intelligent scraping

# Claude model ID (default: claude-3-5-sonnet-20241022)
# Update when newer models are available
CLAUDE_MODEL="claude-3-5-sonnet-20241022"

# Maximum tokens for AI responses (default: 2000)
CLAUDE_MAX_TOKENS="2000"

# Maximum tokens for diagnosis responses (default: 1500)
CLAUDE_MAX_DIAGNOSIS_TOKENS="1500"

# Maximum self-correction attempts (default: 3)
AI_MAX_ATTEMPTS="3"

# Maximum link samples for AI analysis (default: 50)
AI_MAX_LINK_SAMPLES="50"

# Link text truncation length (default: 100 characters)
AI_LINK_TEXT_LENGTH="100"

# Initial analysis rate limit in milliseconds (default: 0 = no limit)
AI_ANALYSIS_RATE_LIMIT="0"

# Initial analysis timeout in milliseconds (default: 8000ms)
AI_ANALYSIS_TIMEOUT="8000"

# ==============================================================================
# FILE UPLOAD CONFIGURATION
# ==============================================================================
# Configure file upload constraints

# Maximum file size in bytes (default: 10485760 = 10 MB)
MAX_FILE_SIZE="10485760"

# Allowed file types (comma-separated, default: pdf,png,jpg,jpeg,csv)
ALLOWED_FILE_TYPES="pdf,png,jpg,jpeg,csv"

# ==============================================================================
# OCR CONFIGURATION
# ==============================================================================
# Configure OCR extraction and validation thresholds

# PDF extraction confidence threshold 0-1 (default: 0.95 = 95%)
OCR_PDF_CONFIDENCE="0.95"

# Maximum monthly kWh usage sanity check (default: 100000)
OCR_MAX_KWH="100000"

# Maximum peak kW demand sanity check (default: 10000)
OCR_MAX_KW="10000"

# Maximum bill cost sanity check in USD (default: 100000)
OCR_MAX_COST="100000"

# ==============================================================================
# CACHING CONFIGURATION
# ==============================================================================
# Configure cache timeouts and limits

# robots.txt cache timeout in milliseconds (default: 86400000 = 24 hours)
CACHE_ROBOTS_TIMEOUT="86400000"

# ==============================================================================
# API CONFIGURATION
# ==============================================================================
# Configure API route runtime limits

# Maximum function execution time in seconds (default: 300 = 5 minutes)
# Vercel serverless limit
MAX_FUNCTION_DURATION="300"

# Cron job scraping rate limit in milliseconds (default: 1500ms)
CRON_RATE_LIMIT="1500"
